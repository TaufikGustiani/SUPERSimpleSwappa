<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SUPERSimpleSwappa — Moon Trading</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/ethers@6.9.0/dist/ethers.umd.min.js"></script>
  <style>
    :root {
      --bg: #0d0f14;
      --bg-panel: #141922;
      --bg-card: #1a1f2a;
      --border: #2d3544;
      --border-soft: #222831;
      --moon: #a78bfa;
      --moon-dim: #8b5cf6;
      --moon-glow: rgba(167, 139, 250, 0.15);
      --green: #34d399;
      --green-dim: #10b981;
      --red: #f87171;
      --red-dim: #ef4444;
      --text: #e2e8f0;
      --text-dim: #94a3b8;
      --radius: 12px;
      --radius-sm: 8px;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Outfit', sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      line-height: 1.5;
      background-image: radial-gradient(ellipse 100% 60% at 50% -10%, rgba(167, 139, 250, 0.08), transparent 60%);
    }
    .app { max-width: 560px; margin: 0 auto; padding: 1.5rem 1rem; }
    header {
      text-align: center;
      padding: 0 0 1.5rem;
      border-bottom: 1px solid var(--border-soft);
      margin-bottom: 1.5rem;
    }
    .logo {
      font-weight: 700;
      font-size: 1.75rem;
      color: var(--moon);
      letter-spacing: 0.02em;
    }
    .tagline { font-size: 0.8rem; color: var(--text-dim); margin-top: 0.35rem; }
    .wallet-bar {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.75rem;
      margin-top: 1rem;
      flex-wrap: wrap;
    }
    .wallet-addr {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.8rem;
      color: var(--moon);
      max-width: 160px;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .btn {
      font-family: 'Outfit', sans-serif;
      font-weight: 600;
      padding: 0.6rem 1.1rem;
      border: 1px solid var(--border);
      background: var(--bg-panel);
      color: var(--text);
      cursor: pointer;
      border-radius: var(--radius-sm);
      font-size: 0.95rem;
      transition: border-color 0.15s, color 0.15s, box-shadow 0.15s;
    }
    .btn:hover { border-color: var(--moon-dim); color: var(--moon); }
    .btn.primary {
      background: var(--moon-dim);
      border-color: var(--moon);
      color: #fff;
    }
    .btn.primary:hover { box-shadow: 0 0 20px var(--moon-glow); }
    .btn.buy { background: rgba(52, 211, 153, 0.12); border-color: var(--green-dim); color: var(--green); }
    .btn.buy:hover { box-shadow: 0 0 16px rgba(52, 211, 153, 0.2); }
    .btn.sell { background: rgba(248, 113, 113, 0.12); border-color: var(--red-dim); color: var(--red); }
    .btn.sell:hover { box-shadow: 0 0 16px rgba(248, 113, 113, 0.2); }
    .btn:disabled { opacity: 0.5; cursor: not-allowed; }
    .btn.big { padding: 0.9rem 1.5rem; font-size: 1.1rem; border-radius: var(--radius); }

    .card {
      background: var(--bg-card);
      border: 1px solid var(--border-soft);
      border-radius: var(--radius);
      padding: 1.25rem;
      margin-bottom: 1rem;
    }
    .card h2 {
      font-size: 1rem;
      font-weight: 600;
      color: var(--text-dim);
      margin-bottom: 1rem;
      text-transform: uppercase;
      letter-spacing: 0.04em;
    }
    .pair-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.6rem 0;
      border-bottom: 1px solid var(--border-soft);
      font-size: 1rem;
    }
    .pair-row:last-child { border-bottom: none; }
    .pair-label { color: var(--text-dim); }
    .pair-value { font-family: 'JetBrains Mono', monospace; color: var(--text); font-weight: 500; }
    .pair-value.green { color: var(--green); }
    .pair-value.red { color: var(--red); }
    .pair-value.moon { color: var(--moon); }

    .trade-box {
      margin-bottom: 1.25rem;
    }
    .trade-tabs {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 1rem;
    }
    .trade-tab {
      flex: 1;
      padding: 0.75rem 1rem;
      text-align: center;
      font-weight: 600;
      font-size: 1rem;
      border-radius: var(--radius-sm);
      cursor: pointer;
      border: 2px solid var(--border);
      background: var(--bg-panel);
      color: var(--text-dim);
      transition: all 0.15s;
    }
    .trade-tab.active.buy { border-color: var(--green); background: rgba(52, 211, 153, 0.1); color: var(--green); }
    .trade-tab.active.sell { border-color: var(--red); background: rgba(248, 113, 113, 0.1); color: var(--red); }

    .field {
      margin-bottom: 1rem;
    }
    .field label {
      display: block;
      font-size: 0.8rem;
      color: var(--text-dim);
      margin-bottom: 0.35rem;
    }
    .field input, .field select {
      width: 100%;
      padding: 0.7rem 0.85rem;
      font-family: 'JetBrains Mono', monospace;
      font-size: 1rem;
      background: var(--bg-panel);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      color: var(--text);
    }
    .field input:focus, .field select:focus {
      outline: none;
      border-color: var(--moon);
      box-shadow: 0 0 0 2px var(--moon-glow);
    }
    .field .hint { font-size: 0.75rem; color: var(--text-dim); margin-top: 0.25rem; }
    .amount-row {
      display: flex;
      gap: 0.5rem;
      align-items: flex-end;
    }
    .amount-row .field { flex: 1; margin-bottom: 0; }
    .amount-row .btn { flex-shrink: 0; padding: 0.7rem 0.9rem; }
    .pct-btns { display: flex; gap: 0.35rem; margin-top: 0.4rem; flex-wrap: wrap; }
    .pct-btns .btn { padding: 0.35rem 0.6rem; font-size: 0.8rem; }

    .submit-row { margin-top: 1.25rem; }
    .submit-row .btn { width: 100%; padding: 0.85rem; font-size: 1.05rem; }

    .message {
      padding: 0.75rem 1rem;
      border-radius: var(--radius-sm);
      font-size: 0.9rem;
      margin-bottom: 1rem;
    }
    .message.info { background: rgba(167, 139, 250, 0.1); border: 1px solid var(--moon); color: var(--moon); }
    .message.success { background: rgba(52, 211, 153, 0.1); border: 1px solid var(--green); color: var(--green); }
    .message.error { background: rgba(248, 113, 113, 0.1); border: 1px solid var(--red); color: var(--red); }

    .ticker {
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 0.5rem;
      padding: 0.85rem 1rem;
      background: var(--bg-panel);
      border: 1px solid var(--border-soft);
      border-radius: var(--radius-sm);
      margin-bottom: 1rem;
    }
    .ticker-symbol { font-weight: 700; font-size: 1.2rem; color: var(--moon); }
    .ticker-price { font-family: 'JetBrains Mono', monospace; font-size: 1.15rem; font-weight: 500; }
    .ticker-change { font-size: 0.85rem; }
    .ticker-change.up { color: var(--green); }
    .ticker-change.down { color: var(--red); }

    .order-list { max-height: 220px; overflow-y: auto; }
    .order-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.5rem 0.75rem;
      border-bottom: 1px solid var(--border-soft);
      font-size: 0.88rem;
    }
    .order-item:last-child { border-bottom: none; }
    .order-side.buy { color: var(--green); }
    .order-side.sell { color: var(--red); }
    .order-price { font-family: 'JetBrains Mono', monospace; }
    .order-qty { color: var(--text-dim); }

    .connect-prompt {
      text-align: center;
      padding: 2rem 1.5rem;
      background: var(--bg-card);
      border: 1px dashed var(--border);
      border-radius: var(--radius);
      margin-bottom: 1.5rem;
    }
    .connect-prompt p { color: var(--text-dim); margin-bottom: 1rem; }
    .connect-prompt .btn { font-size: 1.05rem; padding: 0.75rem 1.5rem; }

    footer { text-align: center; padding: 1.5rem 0; font-size: 0.78rem; color: var(--text-dim); }
    .two-col { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
    @media (max-width: 480px) { .two-col { grid-template-columns: 1fr; } }
    .order-book { max-height: 200px; overflow-y: auto; font-size: 0.85rem; }
    .ob-row { display: flex; justify-content: space-between; padding: 0.35rem 0.75rem; border-bottom: 1px solid var(--border-soft); }
    .ob-row.bid { background: rgba(52, 211, 153, 0.04); }
    .ob-row.ask { background: rgba(248, 113, 113, 0.04); }
    .ob-price { font-family: 'JetBrains Mono', monospace; }
    .ob-size { color: var(--text-dim); }
    .section-title { font-size: 0.75rem; color: var(--text-dim); text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.5rem; }
    .faq-item { padding: 0.75rem 0; border-bottom: 1px solid var(--border-soft); }
    .faq-item:last-child { border-bottom: none; }
    .faq-q { font-weight: 600; color: var(--text); margin-bottom: 0.25rem; }
    .faq-a { font-size: 0.9rem; color: var(--text-dim); }
    .badge { display: inline-block; padding: 0.2rem 0.5rem; border-radius: 4px; font-size: 0.7rem; font-weight: 600; }
    .badge.buy { background: rgba(52, 211, 153, 0.2); color: var(--green); }
    .badge.sell { background: rgba(248, 113, 113, 0.2); color: var(--red); }
    .slippage-row { display: flex; align-items: center; gap: 0.5rem; margin-top: 0.5rem; flex-wrap: wrap; }
    .slippage-row input { width: 80px; padding: 0.4rem; font-family: 'JetBrains Mono', monospace; }
    .network-bar { padding: 0.5rem 1rem; background: var(--bg-panel); border-radius: var(--radius-sm); margin-bottom: 1rem; font-size: 0.8rem; color: var(--text-dim); text-align: center; }
    .tab-content { display: none; }
    .tab-content.active { display: block; }
    .nav-tabs { display: flex; gap: 0.25rem; margin-bottom: 1rem; }
    .nav-tab { padding: 0.5rem 1rem; border-radius: var(--radius-sm); cursor: pointer; border: 1px solid var(--border); background: var(--bg-panel); color: var(--text-dim); font-weight: 500; }
    .nav-tab.active { border-color: var(--moon); color: var(--moon); background: var(--moon-glow); }
    .stats-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.75rem; }
    .stat-item { padding: 0.6rem; background: var(--bg-panel); border-radius: var(--radius-sm); text-align: center; }
    .stat-item .num { font-family: 'JetBrains Mono', monospace; font-weight: 600; color: var(--moon); }
    .stat-item .lbl { font-size: 0.7rem; color: var(--text-dim); margin-top: 0.2rem; }
    .empty-state { padding: 1.5rem; text-align: center; color: var(--text-dim); font-size: 0.9rem; }
    .price-row { display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem; }
    .price-row input { flex: 1; }
    .gas-hint { font-size: 0.72rem; color: var(--text-dim); margin-top: 0.5rem; }
    .divider { height: 1px; background: var(--border-soft); margin: 1rem 0; }
    .btn-block { display: block; width: 100%; text-align: center; }
    @media (max-width: 380px) {
      .app { padding: 1rem 0.75rem; }
      .logo { font-size: 1.4rem; }
      .btn.big { padding: 0.75rem 1rem; font-size: 1rem; }
      .stats-grid { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <div class="app">
    <header>
      <div class="logo">SUPERSimpleSwappa</div>
      <div class="tagline">Moon trading — swap in two taps</div>
      <div class="wallet-bar">
        <span class="wallet-addr" id="walletAddr">Not connected</span>
        <button type="button" class="btn primary" id="btnConnect">Connect wallet</button>
        <button type="button" class="btn" id="btnDisconnect" style="display:none;">Disconnect</button>
      </div>
    </header>

    <div id="connectPrompt" class="connect-prompt">
      <p>Connect your wallet to trade. No signup, no email.</p>
      <button type="button" class="btn primary big" id="btnConnectBig">Connect wallet</button>
    </div>

    <div id="mainContent" style="display:none;">
      <div class="network-bar">Network: Ethereum Mainnet · Moon Trade</div>
      <div class="ticker" id="ticker">
        <span class="ticker-symbol">MOON / USDT</span>
        <span class="ticker-price" id="tickerPrice">—</span>
        <span class="ticker-change" id="tickerChange">—</span>
      </div>
      <div class="stats-grid">
        <div class="stat-item"><div class="num" id="statVol">0</div><div class="lbl">24h Vol</div></div>
        <div class="stat-item"><div class="num" id="statTrades">0</div><div class="lbl">Trades</div></div>
        <div class="stat-item"><div class="num" id="statHigh">—</div><div class="lbl">24h High</div></div>
      </div>
      <div id="messageBox"></div>

      <div class="card trade-box">
        <h2>Swap</h2>
        <div class="trade-tabs">
          <button type="button" class="trade-tab active buy" data-side="buy">Buy MOON</button>
          <button type="button" class="trade-tab sell" data-side="sell">Sell MOON</button>
        </div>
        <div class="field">
          <label>Amount (MOON)</label>
          <div class="amount-row">
            <input type="text" id="amountIn" placeholder="0.0" inputmode="decimal" autocomplete="off" />
            <button type="button" class="btn" id="btnMax">Max</button>
          </div>
          <div class="pct-btns">
            <button type="button" class="btn pct" data-pct="25">25%</button>
            <button type="button" class="btn pct" data-pct="50">50%</button>
            <button type="button" class="btn pct" data-pct="75">75%</button>
            <button type="button" class="btn pct" data-pct="100">100%</button>
          </div>
        </div>
        <div class="field">
          <label>You get (USDT) <span id="youGetHint">≈</span></label>
          <input type="text" id="amountOut" readonly placeholder="0.0" />
        </div>
        <div class="field">
          <label>Price (USDT per MOON)</label>
          <input type="text" id="priceIn" placeholder="0.0" inputmode="decimal" />
          <div class="hint">Leave blank to use market price.</div>
        </div>
        <div class="submit-row">
          <button type="button" class="btn primary big buy" id="btnBuy">Buy MOON</button>
          <button type="button" class="btn primary big sell" id="btnSell" style="display:none;">Sell MOON</button>
        </div>
      </div>

      <div class="card">
        <h2>Your balances</h2>
        <div class="pair-row">
          <span class="pair-label">MOON</span>
          <span class="pair-value moon" id="balMoon">0</span>
        </div>
        <div class="pair-row">
          <span class="pair-label">USDT</span>
          <span class="pair-value" id="balUsdt">0</span>
        </div>
      </div>

      <div class="nav-tabs">
        <button type="button" class="nav-tab active" data-tab="activity">Activity</button>
        <button type="button" class="nav-tab" data-tab="book">Order book</button>
        <button type="button" class="nav-tab" data-tab="faq">FAQ</button>
      </div>
      <div id="tabActivity" class="tab-content active">
        <div class="card">
          <h2>Recent activity</h2>
          <div class="order-list" id="orderList">
            <div class="pair-row"><span class="pair-label">No trades yet</span><span class="pair-value text-dim">—</span></div>
          </div>
        </div>
      </div>
      <div id="tabBook" class="tab-content">
        <div class="card">
          <h2>Order book</h2>
          <div class="section-title">Bids</div>
          <div class="order-book" id="orderBookBids"></div>
          <div class="section-title" style="margin-top:0.75rem">Asks</div>
          <div class="order-book" id="orderBookAsks"></div>
        </div>
      </div>
      <div id="tabFaq" class="tab-content">
        <div class="card">
          <h2>FAQ</h2>
          <div class="faq-item">
            <div class="faq-q">What is SUPERSimpleSwappa?</div>
            <div class="faq-a">A super simple moon trading UI. Connect your wallet and swap MOON for USDT in two taps.</div>
          </div>
          <div class="faq-item">
            <div class="faq-q">Do I need an account?</div>
            <div class="faq-a">No. Just connect your Web3 wallet (e.g. MetaMask). No email or signup.</div>
          </div>
          <div class="faq-item">
            <div class="faq-q">Which networks are supported?</div>
            <div class="faq-a">Ethereum mainnet. Set your wallet to the correct network before trading.</div>
          </div>
          <div class="faq-item">
            <div class="faq-q">What are the fees?</div>
            <div class="faq-a">Fees are set by the Moon Trade contract. Check the contract for current fee (e.g. 12 bps).</div>
          </div>
          <div class="faq-item">
            <div class="faq-q">Is my wallet safe?</div>
            <div class="faq-a">You only sign transactions. This UI never holds your funds; they stay in your wallet until you approve a swap.</div>
          </div>
          <div class="faq-item">
            <div class="faq-q">What is slippage?</div>
            <div class="faq-a">Slippage is the max price move you accept. If the market moves more than that, the swap is cancelled to protect you.</div>
          </div>
        </div>
      </div>
      <div class="card">
        <h2>Settings</h2>
        <div class="field">
          <label>Slippage tolerance (%)</label>
          <div class="slippage-row">
            <input type="number" id="slippage" value="0.5" min="0.1" max="50" step="0.1" />
            <span>%</span>
          </div>
          <div class="gas-hint">Higher slippage may help in volatile markets; lower is safer.</div>
